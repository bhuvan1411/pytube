{% extends 'channels/base.html' %}
{% load dict_filters %}

{% block title %}Videos in {{ channel.name }}{% endblock %}

{% block content %}
<h2 style="text-align:center; color:#007BFF; margin-bottom:20px;">Videos in "{{ channel.name }}"</h2>

{% if videos %}
<div style="display:flex; flex-direction:column; gap:10px; max-width:800px; margin:auto;">
    {% for video in videos %}
    {% with progress_dict|dict_get:video.id as prog %}
    <div style="background:white; padding:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); display:flex; justify-content:space-between; align-items:center;">
        <div>
            <strong>{{ video.order }}. {{ video.title }}</strong>
            {% if prog.watched_percentage >= 95 %}
                <span style="color:green; font-weight:bold;">✔ Completed</span>
            {% endif %}
        </div>
        <div>
            <a href="{% url 'videos:video_detail' video.id %}" class="btn" style="background:#007BFF;">▶ Start / Resume</a>
        </div>
    </div>
    {% endwith %}
    {% endfor %}
</div>
{% else %}
<p style="text-align:center; color:#555;">No videos in this channel yet. {% if user == channel.owner %} <a href="{% url 'videos:video_create' channel.id %}" style="color:#28a745;">Add one now</a>.{% endif %}</p>
{% endif %}

<div style="text-align:center; margin-top:20px;">
    <a href="{% url 'channels:detail' channel.id %}" class="btn" style="background:gray;">⬅ Back to Channel</a>
</div>

<style>
.btn {
    display: inline-block;
    padding: 6px 12px;
    border-radius:5px;
    text-decoration:none;
    color:white;
    font-weight:bold;
    font-size:14px;
}
.btn:hover {
    opacity:0.9;
    transform:translateY(-2px);
    transition:0.2s;
}
</style>
{% endblock %}
